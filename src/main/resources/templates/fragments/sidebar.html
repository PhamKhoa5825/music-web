<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<div th:fragment="sidebar" class="sidebar position-fixed top-0 start-0 h-100" style="width: 240px; padding-top: 24px; z-index: 1000; background-color: #000; border-right: 1px solid #333;">
    <div class="px-4 mb-4">
        <h4 class="fw-bold text-white"><i class="bi bi-music-note-beamed" style="color:#1db954"></i> MusicPro</h4>
    </div>

    <div class="nav flex-column px-2 gap-1">
        <a href="/home" class="nav-link" th:classappend="${currentUri == '/home'} ? 'active-tab' : ''">
            <i class="bi bi-house-door"></i>Trang chủ
        </a>

        <a href="/ranking" class="nav-link" th:classappend="${currentUri == '/ranking'} ? 'active-tab' : ''">
            <i class="bi bi-trophy-fill text-warning"></i>BXH
        </a>

        <a href="/my-music?tab=foryou" class="nav-link" id="nav-foryou">
            <i class="bi bi-stars" style="color: #e91e63;"></i>Dành cho bạn
        </a>

        <div class="mt-4 px-3 text-uppercase small text-secondary fw-bold mb-2" style="font-size: 0.75rem; letter-spacing: 1px;">Thư viện</div>

        <a href="/my-music?tab=liked" class="nav-link" id="nav-liked">
            <i class="bi bi-heart-fill text-danger"></i>Bài hát yêu thích
        </a>
        <a href="/my-music?tab=history" class="nav-link" id="nav-history">
            <i class="bi bi-clock-history text-warning"></i>Nghe gần đây
        </a>

        <hr class="border-secondary mx-3 opacity-25 my-3">

        <div class="d-flex justify-content-between align-items-center px-3 mb-2">
            <a href="/my-music?tab=playlists" class="text-decoration-none text-secondary fw-bold d-flex align-items-center hover-white" style="font-size: 0.85rem;">
                PLAYLIST <i class="bi bi-grid-fill ms-2" style="font-size: 0.7rem;" title="Xem tất cả"></i>
            </a>
            <i class="bi bi-plus-circle text-secondary cursor-pointer hover-scale" id="btn-create-playlist" title="Tạo playlist mới"></i>
        </div>

        <div id="sidebar-playlists" class="px-2" style="overflow-y: hidden; transition: all 0.3s;">
        </div>

        <div class="px-4 mt-1">
            <small id="btn-sidebar-expand" class="text-secondary cursor-pointer hover-text-white d-none" style="font-size: 0.8rem; user-select: none;">
                Xem thêm <i class="bi bi-chevron-down ms-1"></i>
            </small>
        </div>
    </div>
</div>

<div th:fragment="create-playlist-modal">
    <div class="modal fade" id="createPlModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-dark text-white border-secondary">
                <div class="modal-header border-secondary">
                    <h5 class="modal-title fw-bold">Tạo Playlist Mới</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label text-white-50 small fw-bold">TÊN PLAYLIST</label>
                        <input type="text" id="newPlName" class="form-control form-control-lg bg-dark text-white border-secondary">
                    </div>
                    <div class="form-check form-switch bg-dark border border-secondary rounded p-3 d-flex align-items-center">
                        <input class="form-check-input ms-0 me-3" type="checkbox" role="switch" id="isPublicCheck" checked>
                        <div>
                            <span id="label-public" class="fw-bold text-success d-block">Công khai</span>
                            <small class="text-white-50">Mọi người có thể nhìn thấy</small>
                        </div>
                    </div>
                </div>
                <div class="modal-footer border-secondary">
                    <button type="button" class="btn btn-transparent text-white" data-bs-dismiss="modal">Hủy</button>
                    <button class="btn btn-success rounded-pill px-4 fw-bold" id="btn-submit-create-pl" onclick="createPlaylist()">Tạo Playlist</button>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .hover-white:hover { color: white !important; }
    .hover-visible { opacity: 0; transition: 0.2s; }
    .group-action:hover .hover-visible { opacity: 1; }
    .cursor-pointer { cursor: pointer; }
</style>
</body>
</html>