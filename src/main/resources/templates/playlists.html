<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Playlist Của Tôi - MusicPro</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/css/style.css">
    <style>
        body {
            background-color: #050505;
            color: white;
            font-family: 'Segoe UI', sans-serif;
            padding-top: 70px; /* For fixed navbar */
        }
        .playlist-card { background: #181818; border-radius: 8px; overflow: hidden; transition: 0.3s; }
        .playlist-card:hover { background: #282828; transform: translateY(-5px); }
        .playlist-img { height: 180px; object-fit: cover; }
        .playlist-actions { opacity: 0; transition: opacity 0.3s; }
        .playlist-card:hover .playlist-actions { opacity: 1; }
        .badge-private { background: #dc3545; }
        .badge-public { background: #198754; }
        .view-switch .btn { border-radius: 20px; }
        .grid-view .playlist-card { height: 100%; }
        .list-view .playlist-card { height: auto; }
    </style>
</head>
<body>
<div th:replace="~{fragments/navbar :: navbar}"></div>

<div class="main-content">
    <div class="container-fluid py-4 px-5">
        <!-- Header -->
        <div class="d-flex justify-content-between align-items-center mb-5 pt-3">
            <div>
                <h1 class="fw-bold text-white">Playlist Của Tôi</h1>
                <p class="text-white-50">Quản lý và tạo playlist cá nhân</p>
            </div>
            <div class="d-flex gap-3">
                <div class="view-switch btn-group" role="group">
                    <button type="button" class="btn btn-outline-secondary active" onclick="switchView('grid')">
                        <i class="bi bi-grid-3x3-gap"></i>
                    </button>
                    <button type="button" class="btn btn-outline-secondary" onclick="switchView('list')">
                        <i class="bi bi-list-ul"></i>
                    </button>
                </div>
                <button class="btn btn-success" onclick="createNewPlaylist()">
                    <i class="bi bi-plus-lg me-2"></i>Tạo Playlist Mới
                </button>
            </div>
        </div>

        <!-- Stats -->
        <div class="row g-3 mb-5">
            <div class="col-md-3">
                <div class="card bg-dark border-info">
                    <div class="card-body">
                        <div class="d-flex align-items-center">
                            <div class="bg-info bg-opacity-25 p-3 rounded-circle me-3">
                                <i class="bi bi-music-note-list text-info fs-4"></i>
                            </div>
                            <div>
                                <h3 class="text-white mb-0" id="total-playlists">0</h3>
                                <small class="text-white-50">Tổng playlist</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card bg-dark border-success">
                    <div class="card-body">
                        <div class="d-flex align-items-center">
                            <div class="bg-success bg-opacity-25 p-3 rounded-circle me-3">
                                <i class="bi bi-globe text-success fs-4"></i>
                            </div>
                            <div>
                                <h3 class="text-white mb-0" id="public-playlists">0</h3>
                                <small class="text-white-50">Công khai</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card bg-dark border-warning">
                    <div class="card-body">
                        <div class="d-flex align-items-center">
                            <div class="bg-warning bg-opacity-25 p-3 rounded-circle me-3">
                                <i class="bi bi-lock text-warning fs-4"></i>
                            </div>
                            <div>
                                <h3 class="text-white mb-0" id="private-playlists">0</h3>
                                <small class="text-white-50">Riêng tư</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card bg-dark border-primary">
                    <div class="card-body">
                        <div class="d-flex align-items-center">
                            <div class="bg-primary bg-opacity-25 p-3 rounded-circle me-3">
                                <i class="bi bi-clock-history text-primary fs-4"></i>
                            </div>
                            <div>
                                <h3 class="text-white mb-0" id="total-songs">0</h3>
                                <small class="text-white-50">Bài hát</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Filter -->
        <div class="d-flex flex-wrap gap-3 mb-4 bg-dark p-3 rounded">
            <div>
                <span class="text-muted me-2">Lọc theo:</span>
                <select id="filter-type" class="form-select form-select-sm bg-black text-white border-secondary d-inline-block w-auto" onchange="loadPlaylists()">
                    <option value="all">Tất cả</option>
                    <option value="public">Công khai</option>
                    <option value="private">Riêng tư</option>
                    <option value="recent">Gần đây</option>
                    <option value="popular">Phổ biến</option>
                </select>
            </div>
            <div>
                <span class="text-muted me-2">Sắp xếp:</span>
                <select id="sort-by" class="form-select form-select-sm bg-black text-white border-secondary d-inline-block w-auto" onchange="loadPlaylists()">
                    <option value="newest">Mới nhất</option>
                    <option value="oldest">Cũ nhất</option>
                    <option value="name-asc">Tên A-Z</option>
                    <option value="name-desc">Tên Z-A</option>
                    <option value="songs-asc">Ít bài nhất</option>
                    <option value="songs-desc">Nhiều bài nhất</option>
                </select>
            </div>
            <div class="ms-auto">
                <div class="input-group input-group-sm" style="width: 300px;">
                        <span class="input-group-text bg-black text-white border-secondary">
                            <i class="bi bi-search"></i>
                        </span>
                    <input type="text" class="form-control bg-black text-white border-secondary"
                           placeholder="Tìm kiếm playlist..." id="search-input" onkeyup="searchPlaylists()">
                </div>
            </div>
        </div>

        <!-- Playlists Grid View -->
        <div id="grid-view" class="row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-4">
            <!-- Playlists will be loaded here -->
            <div class="col-12 text-center py-5">
                <div class="spinner-border text-info"></div>
                <p class="text-white-50 mt-2">Đang tải playlist...</p>
            </div>
        </div>

        <!-- Playlists List View (Hidden by default) -->
        <div id="list-view" class="d-none">
            <table class="table table-dark table-hover align-middle">
                <thead>
                <tr class="text-secondary">
                    <th width="60"></th>
                    <th>TÊN PLAYLIST</th>
                    <th>SỐ BÀI</th>
                    <th>TRẠNG THÁI</th>
                    <th>NGÀY TẠO</th>
                    <th width="150"></th>
                </tr>
                </thead>
                <tbody id="playlist-list-body">
                <!-- List items will be loaded here -->
                </tbody>
            </table>
        </div>

        <!-- Empty State -->
        <div id="empty-state" class="text-center py-5 d-none">
            <div class="mb-4">
                <i class="bi bi-music-note-list fs-1 text-muted"></i>
            </div>
            <h4 class="text-white-50 mb-3">Bạn chưa có playlist nào</h4>
            <p class="text-muted mb-4">Tạo playlist đầu tiên để lưu những bài hát yêu thích</p>
            <button class="btn btn-success btn-lg" onclick="createNewPlaylist()">
                <i class="bi bi-plus-lg me-2"></i>Tạo Playlist Đầu Tiên
            </button>
        </div>
    </div>

    <div th:replace="~{fragments/footer :: footer}"></div>
</div>

<!-- Create Playlist Modal -->
<div class="modal fade" id="createModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark text-white border-secondary">
            <div class="modal-header border-secondary">
                <h5 class="modal-title fw-bold">Tạo Playlist Mới</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="mb-4">
                    <label class="form-label text-white fw-bold">TÊN PLAYLIST</label>
                    <input type="text" class="form-control form-control-lg bg-black text-white border-secondary"
                           id="playlistName" placeholder="Nhập tên playlist...">
                    <div class="form-text text-white-50">Tên playlist nên ngắn gọn và dễ nhớ</div>
                </div>

                <div class="mb-4">
                    <label class="form-label text-white fw-bold">MÔ TẢ (tùy chọn)</label>
                    <textarea class="form-control bg-black text-white border-secondary"
                              id="playlistDescription" rows="2" placeholder="Mô tả ngắn về playlist..."></textarea>
                </div>

                <div class="mb-4">
                    <label class="form-label text-white fw-bold">CHẾ ĐỘ HIỂN THỊ</label>
                    <div class="form-check form-switch p-3 border border-secondary rounded bg-black">
                        <input class="form-check-input ms-0 me-3" type="checkbox" role="switch" id="isPublicSwitch" checked>
                        <div>
                            <span id="privacy-label" class="fw-bold text-success d-block">Công khai</span>
                            <small class="text-white-50">Mọi người có thể nhìn thấy và nghe playlist này</small>
                        </div>
                    </div>
                </div>

                <div class="mb-3">
                    <label class="form-label text-white fw-bold">ẢNH BÌA (tùy chọn)</label>
                    <div class="border border-secondary rounded p-3 text-center bg-black">
                        <i class="bi bi-image text-white-50 fs-1 d-block mb-2"></i>
                        <small class="text-white-50 d-block mb-3">Tải lên ảnh bìa để playlist thêm sinh động</small>
                        <button class="btn btn-outline-secondary btn-sm" onclick="document.getElementById('coverUpload').click()">
                            <i class="bi bi-upload me-2"></i>Chọn ảnh
                        </button>
                        <input type="file" id="coverUpload" class="d-none" accept="image/*">
                    </div>
                </div>
            </div>
            <div class="modal-footer border-secondary">
                <button type="button" class="btn btn-transparent text-white" data-bs-dismiss="modal">Hủy</button>
                <button type="button" class="btn btn-success rounded-pill px-4 fw-bold" onclick="submitCreatePlaylist()">
                    Tạo Playlist
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Edit Playlist Modal -->
<div class="modal fade" id="editModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark text-white border-info">
            <div class="modal-header border-info">
                <h5 class="modal-title fw-bold">Chỉnh sửa Playlist</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="editPlaylistId">
                <div class="mb-3">
                    <label class="form-label text-white fw-bold">TÊN PLAYLIST</label>
                    <input type="text" class="form-control bg-black text-white border-secondary" id="editPlaylistName">
                </div>
                <div class="mb-3">
                    <label class="form-label text-white fw-bold">MÔ TẢ</label>
                    <textarea class="form-control bg-black text-white border-secondary" id="editPlaylistDescription" rows="3"></textarea>
                </div>
                <div class="form-check form-switch p-3 border border-secondary rounded bg-black mb-4">
                    <input class="form-check-input ms-0 me-3" type="checkbox" role="switch" id="editIsPublic">
                    <label class="form-check-label fw-bold text-success" for="editIsPublic" id="editPrivacyLabel">Công khai</label>
                </div>
            </div>
            <div class="modal-footer border-info">
                <button type="button" class="btn btn-outline-danger me-auto" onclick="deletePlaylist()">Xóa</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                <button type="button" class="btn btn-info" onclick="submitEditPlaylist()">Lưu thay đổi</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    const API = '/api';
    const USER_ID = localStorage.getItem('music_user_id') || 1;
    let playlists = [];
    let currentView = 'grid';

    // Toggle privacy label
    document.getElementById('isPublicSwitch').addEventListener('change', function() {
        const label = document.getElementById('privacy-label');
        if (this.checked) {
            label.textContent = 'Công khai';
            label.className = 'fw-bold text-success d-block';
        } else {
            label.textContent = 'Riêng tư';
            label.className = 'fw-bold text-danger d-block';
        }
    });

    async function loadPlaylists() {
        try {
            const res = await fetch(`${API}/playlists/user/${USER_ID}`);
            playlists = await res.json();
            renderPlaylists();
            updateStats();
        } catch (error) {
            console.error('Error loading playlists:', error);
            showError();
        }
    }

    function renderPlaylists() {
        const gridView = document.getElementById('grid-view');
        const listBody = document.getElementById('playlist-list-body');
        const emptyState = document.getElementById('empty-state');

        // Filter and sort
        let filteredPlaylists = [...playlists];
        const filterType = document.getElementById('filter-type').value;
        const sortBy = document.getElementById('sort-by').value;
        const searchTerm = document.getElementById('search-input').value.toLowerCase();

        // Apply filter
        if (filterType === 'public') {
            filteredPlaylists = filteredPlaylists.filter(p => p.isPublic);
        } else if (filterType === 'private') {
            filteredPlaylists = filteredPlaylists.filter(p => !p.isPublic);
        } else if (filterType === 'recent') {
            filteredPlaylists.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
        } else if (filterType === 'popular') {
            // Sort by song count
            filteredPlaylists.sort((a, b) => (b.playlistSongs?.length || 0) - (a.playlistSongs?.length || 0));
        }

        // Apply search
        if (searchTerm) {
            filteredPlaylists = filteredPlaylists.filter(p =>
                p.name.toLowerCase().includes(searchTerm) ||
                (p.description && p.description.toLowerCase().includes(searchTerm))
            );
        }

        // Apply sort
        if (sortBy === 'newest') {
            filteredPlaylists.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
        } else if (sortBy === 'oldest') {
            filteredPlaylists.sort((a, b) => new Date(a.createdAt) - new Date(b.createdAt));
        } else if (sortBy === 'name-asc') {
            filteredPlaylists.sort((a, b) => a.name.localeCompare(b.name));
        } else if (sortBy === 'name-desc') {
            filteredPlaylists.sort((a, b) => b.name.localeCompare(a.name));
        } else if (sortBy === 'songs-asc') {
            filteredPlaylists.sort((a, b) => (a.playlistSongs?.length || 0) - (b.playlistSongs?.length || 0));
        } else if (sortBy === 'songs-desc') {
            filteredPlaylists.sort((a, b) => (b.playlistSongs?.length || 0) - (a.playlistSongs?.length || 0));
        }

        // Show empty state if no playlists
        if (filteredPlaylists.length === 0) {
            gridView.innerHTML = '';
            listBody.innerHTML = '';
            emptyState.classList.remove('d-none');
            return;
        }

        emptyState.classList.add('d-none');

        // Render grid view
        gridView.innerHTML = filteredPlaylists.map(playlist => `
                <div class="col">
                    <div class="playlist-card position-relative h-100">
                        <div class="position-relative">
                            <img src="${playlist.imageUrl || 'https://placehold.co/400x200?text=Playlist'}"
                                 class="playlist-img w-100">
                            <div class="position-absolute top-0 end-0 m-2 playlist-actions">
                                <button class="btn btn-sm btn-dark rounded-circle" onclick="editPlaylist(${playlist.playlistId}, event)">
                                    <i class="bi bi-pencil"></i>
                                </button>
                            </div>
                            <div class="position-absolute bottom-0 start-0 m-2">
                                <span class="badge ${playlist.isPublic ? 'badge-public' : 'badge-private'}">
                                    ${playlist.isPublic ? 'Công khai' : 'Riêng tư'}
                                </span>
                            </div>
                        </div>
                        <div class="p-3">
                            <h6 class="text-white fw-bold mb-1 text-truncate">${playlist.name}</h6>
                            <p class="text-white-50 small mb-2 text-truncate">${playlist.description || 'Không có mô tả'}</p>
                            <div class="d-flex justify-content-between align-items-center">
                                <small class="text-white-50">
                                    <i class="bi bi-music-note-list me-1"></i>
                                    ${playlist.playlistSongs?.length || 0} bài
                                </small>
                                <button class="btn btn-sm btn-outline-info" onclick="window.location.href='/playlist-detail.html?id=${playlist.playlistId}'">
                                    <i class="bi bi-play-fill me-1"></i> Mở
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');

        // Render list view
        listBody.innerHTML = filteredPlaylists.map(playlist => `
                <tr>
                    <td>
                        <img src="${playlist.imageUrl || 'https://placehold.co/50'}"
                             class="rounded" width="50" height="50" style="object-fit: cover;">
                    </td>
                    <td>
                        <div>
                            <div class="fw-bold text-white">${playlist.name}</div>
                            <small class="text-white-50">${playlist.description || 'Không có mô tả'}</small>
                        </div>
                    </td>
                    <td class="text-white-50">${playlist.playlistSongs?.length || 0}</td>
                    <td>
                        <span class="badge ${playlist.isPublic ? 'badge-public' : 'badge-private'}">
                            ${playlist.isPublic ? 'Công khai' : 'Riêng tư'}
                        </span>
                    </td>
                    <td class="text-white-50 small">${new Date(playlist.createdAt).toLocaleDateString()}</td>
                    <td>
                        <div class="d-flex gap-2">
                            <button class="btn btn-sm btn-outline-info" onclick="window.location.href='/playlist-detail.html?id=${playlist.playlistId}'">
                                <i class="bi bi-play-fill"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-secondary" onclick="editPlaylist(${playlist.playlistId})">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-danger" onclick="confirmDelete(${playlist.playlistId}, '${playlist.name}')">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
    }

    function updateStats() {
        const total = playlists.length;
        const publicCount = playlists.filter(p => p.isPublic).length;
        const privateCount = total - publicCount;
        const totalSongs = playlists.reduce((sum, p) => sum + (p.playlistSongs?.length || 0), 0);

        document.getElementById('total-playlists').textContent = total;
        document.getElementById('public-playlists').textContent = publicCount;
        document.getElementById('private-playlists').textContent = privateCount;
        document.getElementById('total-songs').textContent = totalSongs;
    }

    function switchView(view) {
        currentView = view;
        const gridView = document.getElementById('grid-view');
        const listView = document.getElementById('list-view');
        const gridBtn = document.querySelector('.view-switch .btn:first-child');
        const listBtn = document.querySelector('.view-switch .btn:last-child');

        if (view === 'grid') {
            gridView.classList.remove('d-none');
            listView.classList.add('d-none');
            gridBtn.classList.add('active');
            listBtn.classList.remove('active');
        } else {
            gridView.classList.add('d-none');
            listView.classList.remove('d-none');
            gridBtn.classList.remove('active');
            listBtn.classList.add('active');
        }
    }

    function searchPlaylists() {
        renderPlaylists();
    }

    function createNewPlaylist() {
        document.getElementById('playlistName').value = '';
        document.getElementById('playlistDescription').value = '';
        document.getElementById('isPublicSwitch').checked = true;
        const label = document.getElementById('privacy-label');
        label.textContent = 'Công khai';
        label.className = 'fw-bold text-success d-block';

        const modal = new bootstrap.Modal(document.getElementById('createModal'));
        modal.show();
    }

    async function submitCreatePlaylist() {
        const name = document.getElementById('playlistName').value.trim();
        const description = document.getElementById('playlistDescription').value.trim();
        const isPublic = document.getElementById('isPublicSwitch').checked;

        if (!name) {
            alert('Vui lòng nhập tên playlist');
            return;
        }

        try {
            const res = await fetch(`${API}/playlists`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    userId: USER_ID,
                    name: name,
                    description: description,
                    isPublic: isPublic
                })
            });

            if (res.ok) {
                const modal = bootstrap.Modal.getInstance(document.getElementById('createModal'));
                modal.hide();
                loadPlaylists();
                alert('Tạo playlist thành công!');
            } else {
                alert('Có lỗi xảy ra khi tạo playlist');
            }
        } catch (error) {
            console.error('Error creating playlist:', error);
            alert('Có lỗi xảy ra khi tạo playlist');
        }
    }

    async function editPlaylist(playlistId, event) {
        if (event) event.stopPropagation();

        const playlist = playlists.find(p => p.playlistId === playlistId);
        if (!playlist) return;

        document.getElementById('editPlaylistId').value = playlistId;
        document.getElementById('editPlaylistName').value = playlist.name;
        document.getElementById('editPlaylistDescription').value = playlist.description || '';
        document.getElementById('editIsPublic').checked = playlist.isPublic;

        const label = document.getElementById('editPrivacyLabel');
        if (playlist.isPublic) {
            label.textContent = 'Công khai';
            label.className = 'fw-bold text-success';
        } else {
            label.textContent = 'Riêng tư';
            label.className = 'fw-bold text-danger';
        }

        const modal = new bootstrap.Modal(document.getElementById('editModal'));
        modal.show();
    }

    async function submitEditPlaylist() {
        const playlistId = document.getElementById('editPlaylistId').value;
        const name = document.getElementById('editPlaylistName').value.trim();
        const description = document.getElementById('editPlaylistDescription').value.trim();
        const isPublic = document.getElementById('editIsPublic').checked;

        if (!name) {
            alert('Vui lòng nhập tên playlist');
            return;
        }

        try {
            const res = await fetch(`${API}/playlists/${playlistId}`, {
                method: 'PATCH',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    name: name,
                    description: description,
                    isPublic: isPublic
                })
            });

            if (res.ok) {
                const modal = bootstrap.Modal.getInstance(document.getElementById('editModal'));
                modal.hide();
                loadPlaylists();
                alert('Cập nhật playlist thành công!');
            } else {
                alert('Có lỗi xảy ra khi cập nhật playlist');
            }
        } catch (error) {
            console.error('Error updating playlist:', error);
            alert('Có lỗi xảy ra khi cập nhật playlist');
        }
    }

    function confirmDelete(playlistId, playlistName) {
        if (confirm(`Bạn có chắc muốn xóa playlist "${playlistName}"?\nHành động này không thể hoàn tác.`)) {
            deletePlaylist(playlistId);
        }
    }

    async function deletePlaylist() {
        const playlistId = document.getElementById('editPlaylistId').value;

        if (!playlistId) return;

        if (!confirm('Bạn có chắc muốn xóa playlist này?\nHành động này không thể hoàn tác.')) {
            return;
        }

        try {
            const res = await fetch(`${API}/playlists/${playlistId}`, {
                method: 'DELETE'
            });

            if (res.ok) {
                const modal = bootstrap.Modal.getInstance(document.getElementById('editModal'));
                modal.hide();
                loadPlaylists();
                alert('Đã xóa playlist thành công');
            } else {
                alert('Có lỗi xảy ra khi xóa playlist');
            }
        } catch (error) {
            console.error('Error deleting playlist:', error);
            alert('Có lỗi xảy ra khi xóa playlist');
        }
    }

    function showError() {
        const gridView = document.getElementById('grid-view');
        gridView.innerHTML = `
                <div class="col-12 text-center py-5">
                    <i class="bi bi-exclamation-triangle text-danger fs-1 d-block mb-3"></i>
                    <h4 class="text-white-50">Không thể tải playlist</h4>
                    <p class="text-muted">Vui lòng thử lại sau</p>
                    <button class="btn btn-outline-info" onclick="loadPlaylists()">
                        <i class="bi bi-arrow-clockwise me-2"></i>Thử lại
                    </button>
                </div>
            `;
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
        loadPlaylists();

        // Update privacy label on edit modal
        document.getElementById('editIsPublic').addEventListener('change', function() {
            const label = document.getElementById('editPrivacyLabel');
            if (this.checked) {
                label.textContent = 'Công khai';
                label.className = 'fw-bold text-success';
            } else {
                label.textContent = 'Riêng tư';
                label.className = 'fw-bold text-danger';
            }
        });
    });
</script>
<script src="/js/global-player.js"></script>
</body>
</html>